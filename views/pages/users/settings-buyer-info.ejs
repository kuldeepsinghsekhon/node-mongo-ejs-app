
	<div class="bid-page" style="position: relative; overflow-y: hidden;">
        <div class="split-pane-page">
           <div class="split-pane with-button-bar mg_tp">
      
              
              
              
              <div style="position: relative; overflow-y: hidden;" class="pane forty pane-grey">
                 
                 <div class="selection-subtitle">billing Info</div>
                 <form accept-charset="UTF-8" method="POST" action="/user/settings/buyer-info"  >

                  <div class='form-row'>
                    <div class='col-xs-12 form-group card required card_sec'>
                    <label class='control-label'>Card Number</label>
                    <div class="form-control" id="cc-number"></div>
                    <div class="invalid-feedback">
                     Credit card number is required
                     </div>	  </div>
                  </div>
                  <div class='form-row'>
                    <div class='col-md-4 form-group cvc required card_sec'>
                    <label class='control-label'>CVC</label>
                        <div class="form-control" id="cc-cvv"></div>
                                     <div class="invalid-feedback">
                                      Security code required
                                    </div>	  </div>
                    <div class='col-md-4 form-group expiration required'>
                    <label class='control-label'>Expiration</label>
                    <div class="form-control" id="cc-expiration"></div>
                    <div class="invalid-feedback">
                     Expiration date required
                     </div>	  </div>
                
                  </div>
                  <!-- <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓" />
                    <input name="_method" type="hidden" value="PUT" />
                    <input name="authenticity_token" type="hidden" value="qLZ9cScer7ZxqulsUWazw4x3cSEzv899SP/7ThPCOV8=" />
                  </div> -->
                
            <!--  <div class='form-row'>
                        <div class='col-xs-12 form-group required card_sec'>
                          <label class='control-label'>Full Name </label>
                          <input class='form-control' size='4' type='text'>
                        </div>
                      </div>   
                 <div class='form-row'>
                   <div class='col-xs-12 form-group card required card_sec'>
                     <label class='control-label'>Card Number</label>
                     <input autocomplete='off' class='form-control card-number' size='20' type='text'>
                   </div>
                 </div>
                 <div class='form-row'>
                   <div class='col-md-4 form-group cvc required card_sec'>
                     <label class='control-label'>CVC</label>
                     <input autocomplete='off' class='form-control card-cvc' placeholder='ex. 311' size='4' type='text'>
                   </div>
                   <div class='col-md-4 form-group expiration required'>
                     <label class='control-label'>Expiration</label>
                     <input class='form-control card-expiry-month' placeholder='MM' size='2' type='text'>
                   </div>
                   <div class='col-md-4 form-group expiration required'>
                     <label class='control-label'> </label>
                     <input class='form-control card-expiry-year' placeholder='YYYY' size='4' type='text'>
                   </div>
                 </div>-->
                 
                 
              
               
     
                 <div class="address-form fs-block">

                    <% include ../../partials/messages %>
                    <input data-testid="user-firstName" name="name" type="text" value="<% if(address){%><%=address.name%><% } %>" required="" placeholder="Full Name" autocomplete="true" class="field  " value="">
                    <div class="field   field-select cntry">
                       <select name="country" required="" placeholder="Country">
                          
                          <option value="">Country</option>
                          <option value="US">United States</option>
                          <option value="AU">Australia</option>
                          <option value="CA">Canada</option>
                          <option value="FR">France</option>
                          <option value="DE">Germany</option>
                          <option value="HK">Hong Kong SAR</option>
                          <option value="IT">Italy</option>
                          <option value="JP">Japan</option>
                          <option value="SG">Singapore</option>
                          <option value="AE">United Arab Emirates</option>
                          <option value="GB">United Kingdom</option>
                          <option disabled="">------</option>
                          <option value="AL">Albania</option>
                         
                       </select>
                       
                    </div>
                    <div>
                       <div class="GPlacesACField__Container-sc-1xqqpdz-0 iUshPx">
                         <input data-testid="user-streetAddress" name="address1" value="<% if(address){%><%=address.address1%><% } %>" type="text" required="" placeholder="Address " autocomplete="true" class="field  " value=""></div>
                    </div> 
                    <input data-testid="user-extendedAddress" name="address2" type="text" value="<% if(address){%><%=address.address2%><% } %>" placeholder="Address 2" autocomplete="true" class="field  " value="">
                   
                    <div class="inner-flex between"><input data-testid="user-region" name="state" type="text" placeholder="State/Province/Region" autocomplete="true" class="field field-full " value="">
                  
                    <input data-testid="user-locality" name="city" type="text" required="" placeholder="City" autocomplete="true" class="field  " value="">
                        <input data-testid="user-postalCode" name="postalCode" type="text" required="" placeholder="Zip/Postal Code" autocomplete="true" class="field field-full " value=""></div>
                    <input data-testid="user-telephone" name="phone" type="tel" required="" placeholder="Phone Number" autocomplete="true" class="field  " value="">
                 </div>
                 <div class="cncl_btn">
                       <button type="button " class="btn flT_lft">Cancel</button>
                       <button type="submit" class="btn flT_right color_rd ">Save Shipping</button>
                       </div>  
                      </form>
              </div>
           </div>
        </div>
     </div>
     
     

<!-- organisation_name => Company
administrative_area => State / Province / Region (ISO code when available)
sub_administrative_area => County / District (unused)
locality => City / Town
dependent_locality => Dependent locality (unused)
postal_code => Postal code / ZIP Code
thoroughfare => Street address
premise => Apartment, Suite, Box number, etc.
const Address = mongoose.model('Address', UserSchema); -->
<script>
  var form = $('form');
  
  braintree.client.create({
    authorization: 'sandbox_tvb37t33_dwt5m34ppngz6s7k'
  },
   function(err, clientInstance) {
    if (err) {
      console.error(err);
      return;
    }
  
    braintree.hostedFields.create({
      client: clientInstance,
      styles: {
        input: {
          // change input styles to match
          // bootstrap styles
          'font-size': '1rem',
          color: '#495057'
        }
      },
      fields: {
        number: {
          selector: '#cc-number',
          placeholder: '4111 1111 1111 1111'
        },
        cvv: {
          selector: '#cc-cvv',
          placeholder: '123'
        },
        expirationDate: {
          selector: '#cc-expiration',
          placeholder: 'MM / YY'
        }
      }
    }, function(err, hostedFieldsInstance) {
      if (err) {
        console.error(err);
        return;
      }
      function createInputChangeEventListener(element) {
        return function () {
          validateInput(element);
        }
      }
  
      function setValidityClasses(element, validity) {
        if (validity) {
          element.removeClass('is-invalid');
          element.addClass('is-valid');  
        } else {
          element.addClass('is-invalid');
          element.removeClass('is-valid');  
        }    
      }
      
      function validateInput(element) {
        // very basic validation, if the
        // fields are empty, mark them
        // as invalid, if not, mark them
        // as valid
  
        if (!element.val().trim()) {
          setValidityClasses(element, false);
  
          return false;
        }
  
        setValidityClasses(element, true);
  
        return true;
      }
      
      // function validateEmail () {
      //   var baseValidity = validateInput(email);
        
      //   if (!baseValidity) {  
      //     return false;
      //   }
  
      //   if (email.val().indexOf('@') === -1) {
      //     setValidityClasses(email, false);
      //     return false;
      //   }
        
      //   setValidityClasses(email, true);
      //   return true;
      // }
  
      var fName = $('#fName');
      var lName = $('#lName');
      //var email = $('#email');
  
      // fName.on('change', function () {
      //   validateInput(fName);
      // });
      // lName.on('change', function () {
      //   validateInput(lName);
      // });
      //email.on('change', validateEmail);
  
  
              hostedFieldsInstance.on('validityChange', function(event) {
        var field = event.fields[event.emittedBy];
  
        // Remove any previously applied error or warning classes
        $(field.container).removeClass('is-valid');
        $(field.container).removeClass('is-invalid');
  
        if (field.isValid) {
          $(field.container).addClass('is-valid');
        } else if (field.isPotentiallyValid) {
          // skip adding classes if the field is
          // not valid, but is potentially valid
        } else {
          $(field.container).addClass('is-invalid');
        }
      });
  
      hostedFieldsInstance.on('cardTypeChange', function(event) {
        var cardBrand = $('#card-brand');
        var cvvLabel = $('[for="cc-cvv"]');
  
        if (event.cards.length === 1) {
          var card = event.cards[0];
  
          // change pay button to specify the type of card
          // being used
          cardBrand.text(card.niceType);
          // update the security code label
          cvvLabel.text(card.code.name);
        } else {
          // reset to defaults
          cardBrand.text('Card');
          cvvLabel.text('CVV');
        }
      });
  
      form.submit(function(event) {
        event.preventDefault();
        var formIsInvalid = false;
        var state = hostedFieldsInstance.getState();
  
       
        Object.keys(state.fields).forEach(function(field) {
          if (!state.fields[field].isValid) {
            $(state.fields[field].container).addClass('is-invalid');
            formIsInvalid = true;
          }
        });
        console.log(formIsInvalid);
        if (formIsInvalid) {
          return;
        }
      $.ajax();

      
      
      });
    });
  });
  </script>